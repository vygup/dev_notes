## Терминология `GIT`

В операциях `Git` управляет тремя деревьями:

|Дерево|Назначение|
|---|---|
|HEAD|Снимок последнего коммита, родитель следующего|
|Индекс|Область подготовленных изменений|
|Рабочий Каталог|Песочница|

`HEAD` — это указатель на текущую ветку, которая, в свою очередь, является указателем на последний коммит, сделанный в этой ветке.

`Индекс` — это снимок следующего намеченного коммита.

`Рабочий Каталог` - это где вы можете опробовать изменения перед их коммитом в индекс (область подготовленных изменений) и затем в историю.

## Команды при работе с `GIT`

### Основное

Общая документация `git`:
```bash
git --help
#или
git help
```

Документация по определенной команде:
```bash
git command --help
```

 Просмотр всех настроек:
```bash
git config --list 
```
> С параметром `--system` - настройки будут применены для всех репозитериев всех пользователей системы
> `--global` - настройки для всех репозиториев текущего пользователя в системе
> `--local` _по умолчанию_ - настройки для конкретного репозитория

 Инициализация системы контроля версий:
```bash
git init
```

>Cоздать новый проект в указанной директории:
```bash
git init folder_name
```

Клонирование репозитрория из облака одноименную директорию (`GitHub`, `Gitlab`,`bitbucket` и др) (`https` или `ssh`):
```bash
git clone repository_link
```

>Клонирование репозитрория из облака в определенную папку:
```bash
git clone repository_link folder_name
```

>Клонирование репозитрория из облака в текущую директорию:
```bash
git clone repository_link .
```

Информация о текщем состоянии репозитория:
```bash
git status
```

Начать контроль изменений всех файлов:
```bash
git add --a
# or
git add .
```
>`.` - фиксирует все изменения и добавления
>`--a` или `-all` - фиксирует все изменения, добавления и удаления

Проверка состояния дерева проиндексированных файлов:
```bash
git ls-files -s
```
> `--stage` или `-s` -  Вывод метаданных - биты режима проиндексированного контента, имя объекта и номер в индексе

Фиксация изменений:
```bash
git commit -m 'comment'
```
> `-a` - этот параметр перед коммитом проиндексирует все отслеживаемые файлы, альтернатива отдельному индексированию `git add`

Посмотреть коммиты:
```bash
git log
```

Отследить изменения определенной операции:
```bash
git show hash_commit
```

Просмотр веток:
```bash
git branch
```

Создание ветки:
```bash
git branch branch_name
```

Переход между ветками:
```bash
git checkout branch_name
```
> c параметром `-b` `git` создаст ветку и перейдет в нее

Отправка изменений в удаленный репозиторий:
```bash
git push origin branch_name
```


### Добавление изменений

Добавить в индекс все новые, изменённые, удалённые файлы из текущей директории и её поддиректорий:
```bash
git add .
```

Добавить в индекс указанный файл (был изменён, был удалён или это новый файл):
```bash
git add file
```

Запустить интерактивную оболочку для добавления в индекс только выбранных файлов:
```bash
git add -i
```

Показать новые/изменённые файлы по очереди с указанием их изменений и вопросом об отслеживании/индексировании:
```bash
git add -p
```


### Просмотр изменений

Сравнить рабочую директорию и индекс (неотслеживаемые файлы игнорируются):
```bash
git diff
```

Cравнить рабочую директорию и индекс, показать отличия в словах (неотслеживаемые файлы игнорируются):
```bash
git diff --color-words
```

Cравнить файл из рабочей директории и индекс:
```bash
git diff file_name
```

Cравнить индекс и коммит с `HEAD`:
```bash
git diff --staged
```

Посмотреть что сделано в ветке `feature` по сравнению с веткой `master`:
```bash
git diff master feature
```

Посмотреть что сделано в ветке `feature` по сравнению с веткой `master`, показать только имена файлов:
```bash
git diff --name-only master feature
```

 Посмотреть что сделано в ветке `feature` с момента (коммита) расхождения с `master`:
 ```bash
 git diff master...feature
```

### Отмена изменений

Отменить изменения в файле - вернуть состояние файла, имеющееся в индексе:
```bash
git checkout file
```

Восстановить в рабочей директории указанный файл на момент указанного коммита (и добавить это изменение в индекс):
```bash
git checkout hash_commit file
```
> Послке выполнения команды указатель `main` по-прежнему ссылается на последний коммит. Указатель `HEAD` переместился и теперь ссылается на коммит `b`. В данный момент репозиторий находится в состоянии открепленного указателя `HEAD`.

Удаление изменений из индекса:
```bash
git reset название_файла
```
>Или без указания файла, чтобы убрать из индекса все добавленные в него изменения.
>Также есть аргументы командной строки `--soft, --mixed` и `--hard` определяют, каким образом необходимо изменить деревья раздела проиндексированных файлов и рабочего каталога:
>`--soft` - действует только на дерево истории коммитов. Выполняется обновление указателей, и на этом операция сброса останавливается. Раздел проиндексированных файлов и рабочий каталог остаются неизменными. В отличии от этого параметра `--hard` и `--mixed` воздействовали на указатель `HEAD` и не возвращали дерево коммитов в предыдущее состояние.
>`--mixed` - _по умолчанию_ действует на коммиты и индекс.  Указатели ссылок обновляются. Раздел проиндексированных файлов сбрасывается до состояния указанного коммита. Любые изменения, которые были отменены в разделе проиндексированных файлов, перемещаются в рабочий каталог.
>`--hard` - указатели в истории коммитов обновляются на указанный коммит. Затем происходит сброс раздела проиндексированных файлов и рабочего каталога до указанного коммита. Все предыдущие ожидающие изменения в разделе проиндексированных файлов и рабочем каталоге сбрасываются в соответствии с состоянием дерева коммитов.

Более безопасный способ отмены изменений:
```bash
git revert
```
> Эта команда никогда не удаляет коммиты, однако может оставить их без родителя, т. е. указатель потеряет прямой путь для доступа к ним. Такие коммиты обычно можно найти и восстановить с помощью команды `git reflog`. После запуска внутреннего «сборщика мусора» система Git навсегда удалит все коммиты без родителя. По умолчанию запуск происходит каждые 30 дней.

Удалить неотслеживаемые файлы из директории:
```bash
git clean -df
```

### Коммиты

Изменить комментарий:
```bash
git commit --amend -m 'new comment'
```

 Проиндексировать отслеживаемые файлы (не учитывая новые файлы):
 ```bash
git commit -a -m "comment"
```
Позволяет переписать историю, выбирая, какие коммиты оставить, слить или отменить:
```bash
git rebase -i
```
#### Отмена коммитов и перемещение по истории

Создать новый коммит, отменяющий изменения последнего коммита без запуска редактора сообщения:
```bash
git revert HEAD --no-edit
```
Отмена изменений, внесённых коммитом с указанным хешем:
```bash
git revert commit_hash --no-edit
```

Удалить последний комит
```bash
git reset --hard HEAD~
```